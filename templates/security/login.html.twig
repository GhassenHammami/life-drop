{# templates/security/login.html.twig #}
{% extends 'base.html.twig' %}

{% block title %}
    Log in — LifeDrop
{% endblock %}

{% block body %}
    <div class="mx-auto max-w-6xl px-6 py-10 md:py-16">
        <div class="grid gap-10 md:grid-cols-2 md:items-center">
            {# Left: message (optional, matches style) #}
            <div class="hidden md:block">
                <h1 class="text-4xl font-bold tracking-tight">
                    Welcome back.
                </h1>
                <p class="mt-3 text-slate-300/90">
                    Log in to post requests, offer help, and follow the status until it’s solved.
                </p>
            </div>

            {# Right: form card #}
            <div>
                <div class="mx-auto max-w-md">
                    <div class="rounded-3xl bg-linear-to-b from-white/10 to-white/5 p-1 ring-1 ring-white/10">
                        <div class="rounded-3xl bg-slate-950/60 p-6 backdrop-blur md:p-8">
                            <div>
                                <h2 class="text-2xl font-bold tracking-tight">
                                    Log in
                                </h2>
                                <p class="mt-1 text-sm text-slate-300/90">
                                    Use your email and password.
                                </p>
                            </div>

                            {% if error %}
                                <div class="mt-5 rounded-2xl border border-rose-500/25 bg-rose-600/10 p-4 text-sm text-rose-100">
                                    {{ error.messageKey|trans(error.messageData, 'security') }}
                                </div>
                            {% endif %}

                            {% if app.user %}
                                <div class="mt-5 rounded-2xl border border-emerald-500/25 bg-emerald-500/10 p-4 text-sm text-emerald-100">
                                    You are logged in as
                                    <span class="font-semibold">
                                        {{ app.user.userIdentifier }}
                                    </span>
                                    .
                                    <a href="{{ logout_path() }}" class="underline decoration-emerald-200/40 underline-offset-4 hover:text-white">
                                        Logout
                                    </a>
                                </div>
                            {% endif %}

                            <form method="post" class="mt-6 space-y-4">
                                <div>
                                    <label for="username" class="mb-2 block text-sm font-medium text-slate-200/90">
                                        Email
                                    </label>
                                    <input type="email" value="{{ last_username }}" name="_username" id="username" class="w-full rounded-2xl bg-white/5 px-4 py-3 text-sm text-slate-100 placeholder:text-slate-400/70 ring-1 ring-white/10
                                    focus:outline-none focus-visible:ring-2 focus-visible:ring-rose-300/60" autocomplete="email" required autofocus placeholder="you@example.com"></div>

                                    <div>
                                        <label for="password" class="mb-2 block text-sm font-medium text-slate-200/90">
                                            Password
                                        </label>
                                        <input type="password" name="_password" id="password" class="w-full rounded-2xl bg-white/5 px-4 py-3 text-sm text-slate-100 placeholder:text-slate-400/70 ring-1 ring-white/10
                                        focus:outline-none focus-visible:ring-2 focus-visible:ring-rose-300/60" autocomplete="current-password" required placeholder="••••••••"></div>

                                        <input type="hidden" name="_csrf_token" value="{{ csrf_token('authenticate') }}">

                                            <div class="flex items-center justify-between">
                                                <label class="flex cursor-pointer items-center gap-3 text-sm text-slate-200/90">
                                                    <input type="checkbox" name="_remember_me" id="_remember_me" class="h-4 w-4 rounded border-white/20 bg-white/10 text-rose-500 ring-1 ring-white/10 focus:ring-0 focus:outline-none">
                                                        Remember me
                                                    </label>

                                                    <a href="{{ path('app_register') }}" class="text-sm text-slate-300/90 underline decoration-white/15 underline-offset-4 hover:text-white">
                                                        Create an account
                                                    </a>
                                                </div>

                                                <button type="submit" class="w-full cursor-pointer rounded-2xl bg-rose-600 px-5 py-3 text-sm font-semibold text-white
                                                        hover:bg-rose-500 shadow-lg shadow-rose-600/25 active:scale-[0.99]
                                                    focus:outline-none focus-visible:ring-2 focus-visible:ring-rose-300/60">
                                                    Sign in
                                                </button>
                                            </form>

                                            <div class="mt-6 text-center text-xs text-slate-400">
                                                By logging in, you agree to use LifeDrop respectfully and keep shared information private.
                                            </div>
                                        </div>
                                    </div>

                                    <div class="mt-6 text-center text-xs text-slate-400">
                                        Need to go back?
                                        <a href="{{ path('app_home') }}" class="underline decoration-white/15 underline-offset-4 hover:text-white">
                                            Return to Home
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                {% endblock %}
                